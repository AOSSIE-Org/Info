name: Evangelist Application Welcome

on:
  pull_request_target:
    types: [opened]
    paths:
      - 'Evangelists.md'

jobs:
  welcome:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    
    steps:
      - name: Post welcome comment
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const linesChanged = context.payload.pull_request.additions +
                                 context.payload.pull_request.deletions;
            if (linesChanged > 2) { return; }

            const author = context.payload.pull_request.user.login;
            const message = `Hey @${author}, welcome to the Evangelists Program. Please answer the following questions to move forward with your application:

            1. What student community are you a part of (With links to verifiable sources)?
            2. What is your role in the student community?
            3. What is your motivation for applying to the AOSSIE Evangelist program?
            4. What is your vision/what do you intend to do and achieve as an AOSSIE Evangelist?`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: message
            });
